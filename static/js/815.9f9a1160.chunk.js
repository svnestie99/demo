"use strict";(self.webpackChunkreact_1=self.webpackChunkreact_1||[]).push([[815],{5815:function(s,t,e){e.r(t),e.d(t,{default:function(){return D}});var r=e(8683),i=e(5671),o=e(3144),n=e(136),u=e(5716),a=e(2791),p=e(364),l=e(542),c=e(7781),d=e(6070),h="ProfileInfo_descriptionBlock__GzUt4",f="ProfileInfo_mainPhoto__3NxcE",x=e(1457),m=e(8478),j=e(885),v=e(184),P=function(s){var t=(0,a.useState)(!1),e=(0,j.Z)(t,2),r=e[0],i=e[1],o=(0,a.useState)(s.status),n=(0,j.Z)(o,2),u=n[0],p=n[1];(0,a.useEffect)((function(){p(s.status)}),[s.status]);return(0,v.jsxs)("div",{children:[!r&&(0,v.jsx)("div",{children:(0,v.jsx)("span",{onDoubleClick:function(){i(!0)},children:s.status||"----"})}),r&&(0,v.jsx)("div",{children:(0,v.jsx)("input",{onChange:function(s){p(s.currentTarget.value)},onBlur:function(){i(!1),s.updateStatus(u)},autoFocus:!0,value:u})})]})},g=function(s){if(!s.profile)return(0,v.jsx)(x.p,{});return(0,v.jsx)("div",{children:(0,v.jsxs)("div",{className:h,children:[(0,v.jsx)("img",{src:s.profile.photos.large||m,className:f}),(0,v.jsx)("div",{children:s.isOwner&&(0,v.jsx)("input",{type:"file",onChange:function(t){t.target.files.length&&s.savePhoto(t.target.files[0])}})}),(0,v.jsx)("div",{children:s.profile.fullName}),(0,v.jsx)("div",{children:s.profile.aboutMe}),(0,v.jsx)(P,{status:s.status,updateStatus:s.updateStatus})]})})},_="MyPosts_postsBlock__mvcPp",k="MyPosts_posts__xDTfz",S="Post_item__ztQiK",w=function(s){return(0,v.jsxs)("div",{className:S,children:[(0,v.jsx)("img",{src:"https://cspromogame.ru//storage/upload_images/avatars/1299.jpg"}),s.message,(0,v.jsx)("div",{children:(0,v.jsxs)("span",{children:["Like ",s.likesCount]})})]})},C=e(6139),y=e(704),N=e(5304),Z=e(9086),I=(0,N.D)(10),b=(0,y.Z)({form:"ProfileAddNewPostForm"})((function(s){return(0,v.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,v.jsx)("div",{children:(0,v.jsx)(C.Z,{name:"newPostText",component:Z.g,validate:[N.C,I]})}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{children:"Add post"})})]})})),U=(0,p.$j)((function(s){return{posts:s.profilePage.posts,newPostText:s.profilePage.newPostText}}),(function(s){return{addPost:function(t){s((0,d.Wl)(t))}}}))((function(s){var t=s.posts.map((function(s,t){return(0,v.jsx)(w,{message:s.message,likesCount:s.likesCount},t)}));return(0,v.jsxs)("div",{className:_,children:[(0,v.jsx)("h3",{children:"My posts"}),(0,v.jsx)(b,{onSubmit:function(t){s.addPost(t.newPostText)}}),(0,v.jsx)("div",{className:k,children:t})]})})),T=function(s){return(0,v.jsxs)("div",{children:[(0,v.jsx)(g,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,updateStatus:s.updateStatus}),(0,v.jsx)(U,{})]})},z=function(s){(0,n.Z)(e,s);var t=(0,u.Z)(e);function e(){return(0,i.Z)(this,e),t.apply(this,arguments)}return(0,o.Z)(e,[{key:"refreshProfile",value:function(){var s=this.props.match.params.userId;s||(s=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(s),this.props.getUserStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s){this.props.match.params.userId!==s.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsx)(T,(0,r.Z)((0,r.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),e}(a.Component),D=(0,c.qC)((0,p.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUserProfile:d.et,getUserStatus:d.Tq,updateStatus:d.Nf,savePhoto:d.Ju}),l.EN)(z)}}]);
//# sourceMappingURL=815.9f9a1160.chunk.js.map