"use strict";(self.webpackChunkreact_1=self.webpackChunkreact_1||[]).push([[300],{6300:function(s,e,t){t.r(e),t.d(e,{default:function(){return G}});var i=t(8683),r=t(5671),o=t(3144),n=t(136),a=t(5716),l=t(2791),u=t(364),c=t(542),d=t(7781),h=t(6070),p=t(885),f="ProfileInfo_descriptionBlock__GzUt4",x="ProfileInfo_mainPhoto__3NxcE",j="ProfileInfo_contact__hbK9Q",m=t(1457),v=t(8478),b=t(184),g=function(s){var e=(0,l.useState)(!1),t=(0,p.Z)(e,2),i=t[0],r=t[1],o=(0,l.useState)(s.status),n=(0,p.Z)(o,2),a=n[0],u=n[1];(0,l.useEffect)((function(){u(s.status)}),[s.status]);return(0,b.jsxs)("div",{children:[!i&&(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"Status:"})," ",(0,b.jsx)("span",{onDoubleClick:function(){r(!0)},children:s.status||"----"})]}),i&&(0,b.jsx)("div",{children:(0,b.jsx)("input",{onChange:function(s){u(s.currentTarget.value)},onBlur:function(){r(!1),s.updateStatus(a)},autoFocus:!0,value:a})})]})},P=t(704),k=t(9086),S=t(232),_=(0,P.Z)({form:"edit-profile"})((function(s){return(0,b.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,b.jsx)("div",{children:(0,b.jsx)("button",{children:"Save"})}),s.error&&(0,b.jsx)("div",{className:S.Z.formSummaryError,children:s.error}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"Full name: "}),(0,k.Gr)("Full name","fullName",[],k.II)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"Looking for a job: "}),(0,k.Gr)("","lookingForAJob",[],k.II,{type:"checkbox"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"My professional skills :"}),(0,k.Gr)("My professional skills","lookingForAJobDescription",[],k.gx)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"About me: "})," ",(0,k.Gr)("About me","aboutMe",[],k.gx)]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"Contacts: "})," ",Object.keys(s.profile.contacts).map((function(s){return(0,b.jsx)("div",{className:j,children:(0,b.jsxs)("b",{children:[s,":",(0,k.Gr)(s,"contacts.".concat(s),[],k.II)]})},s)}))]})]})})),y=function(s){var e=(0,l.useState)(!1),t=(0,p.Z)(e,2),i=t[0],r=t[1];if(!s.profile)return(0,b.jsx)(m.p,{});return(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:f,children:[(0,b.jsx)("img",{src:s.profile.photos.large||v,className:x}),(0,b.jsx)("div",{children:s.isOwner&&(0,b.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&s.savePhoto(e.target.files[0])}})}),i?(0,b.jsx)(_,{initialValues:s.profile,profile:s.profile,onSubmit:function(e){s.saveProfile(e).then((function(){r(!1)}))}}):(0,b.jsx)(I,{profile:s.profile,isOwner:s.isOwner,goToEditMode:function(){r(!0)}}),(0,b.jsx)(g,{status:s.status,updateStatus:s.updateStatus})]})})},I=function(s){return(0,b.jsxs)("div",{children:[s.isOwner&&(0,b.jsx)("div",{children:(0,b.jsx)("button",{onClick:s.goToEditMode,children:"Edit"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"Full name: "}),s.profile.fullName]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"Looking for a job: "}),s.profile.lookingForAJob?"Yes":"No"]}),s.profile.lookingForAJob&&(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"My professional skills :"}),s.profile.lookingForAJobDescription]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"About me: "})," ",s.profile.aboutMe]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("b",{children:"Contacts: "})," ",Object.keys(s.profile.contacts).map((function(e){return(0,b.jsx)(N,{contactTitle:e,contactValue:s.profile.contacts[e]},e)}))]})]})},N=function(s){return(0,b.jsxs)("div",{className:j,children:[(0,b.jsx)("b",{children:s.contactTitle}),": ",s.contactValue]})},w="MyPosts_postsBlock__mvcPp",C="MyPosts_posts__xDTfz",Z="Post_item__ztQiK",A=function(s){return(0,b.jsxs)("div",{className:Z,children:[(0,b.jsx)("img",{src:"https://cspromogame.ru//storage/upload_images/avatars/1299.jpg"}),s.message,(0,b.jsx)("div",{children:(0,b.jsxs)("span",{children:["Like ",s.likesCount]})})]})},M=t(6139),T=t(5304),F=(0,T.D)(10),O=(0,P.Z)({form:"ProfileAddNewPostForm"})((function(s){return(0,b.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,b.jsx)("div",{children:(0,b.jsx)(M.Z,{name:"newPostText",component:k.gx,validate:[T.C,F]})}),(0,b.jsx)("div",{children:(0,b.jsx)("button",{children:"Add post"})})]})})),U=(0,u.$j)((function(s){return{posts:s.profilePage.posts,newPostText:s.profilePage.newPostText}}),(function(s){return{addPost:function(e){s((0,h.Wl)(e))}}}))((function(s){var e=s.posts.map((function(s,e){return(0,b.jsx)(A,{message:s.message,likesCount:s.likesCount},e)}));return(0,b.jsxs)("div",{className:w,children:[(0,b.jsx)("h3",{children:"My posts"}),(0,b.jsx)(O,{onSubmit:function(e){s.addPost(e.newPostText)}}),(0,b.jsx)("div",{className:C,children:e})]})})),D=function(s){return(0,b.jsxs)("div",{children:[(0,b.jsx)(y,{savePhoto:s.savePhoto,isOwner:s.isOwner,profile:s.profile,status:s.status,saveProfile:s.saveProfile,updateStatus:s.updateStatus}),(0,b.jsx)(U,{})]})},E=function(s){(0,n.Z)(t,s);var e=(0,a.Z)(t);function t(){return(0,r.Z)(this,t),e.apply(this,arguments)}return(0,o.Z)(t,[{key:"refreshProfile",value:function(){var s=this.props.match.params.userId;s||(s=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(s),this.props.getUserStatus(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(s){this.props.match.params.userId!==s.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,b.jsx)(D,(0,i.Z)((0,i.Z)({},this.props),{},{isOwner:!this.props.match.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),t}(l.Component),G=(0,d.qC)((0,u.$j)((function(s){return{profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth}}),{getUserProfile:h.et,getUserStatus:h.Tq,updateStatus:h.Nf,savePhoto:h.Ju,saveProfile:h.Ii}),c.EN)(E)}}]);
//# sourceMappingURL=300.84f1aec6.chunk.js.map